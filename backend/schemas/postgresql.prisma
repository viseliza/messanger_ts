datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model User {
    id          Int      @id @default(autoincrement())
    login       String   @unique
    password    String
    profile     Profile?
}

model Group {
    id          Int      @id @default(autoincrement())
    name        String   @unique
    href        String?

    profiles    Profile[] @relation("ProfileToGroup")
}

model Profile {
    id          Int      @id @default(autoincrement())
    email       String?  @unique
    first_name  String?
    last_name   String?
    father_name String?
    theme       Theme    @default(white)
    role        Role     @default(STUDENT)
    user        User?    @relation(fields: [user_id], references: [id])
    user_id     Int?     @unique
    group       Group?   @relation("ProfileToGroup", fields: [group_id], references: [id])
    group_id    Int?
    rooms       ProfileRooms[]
}


model ProfileRooms {
    id          Int      @id @default(autoincrement())
    profile     Profile  @relation(fields: [profile_id], references: [id])
    room        Room     @relation(fields: [room_id], references: [id])
    profile_id  Int
    room_id     Int
}


model Room {
    id          Int      @id @default(autoincrement())
    name        String
    profiles    ProfileRooms[]
    messages    Message[]
}

model Message {
    id          Int      @id @default(autoincrement())
    user_id     Int
    text        String
    time        String
    is_read     Boolean?
    room        Room     @relation(fields: [room_id], references: [id])
    room_id     Int
}

enum Role {
    STUDENT
    TEACHER
}

enum Theme {
    white
    black
}
















// model User {
//     id          Int      @id @default(autoincrement())
//     login       String   @unique
//     profile     Profile?
//     group       Group?
// }

// model Profile {
//     id          Int      @id @default(autoincrement())
//     user        User?    @relation(fields: [user_login], references: [login])
//     user_login  String?  @unique
//     group       Group?   @relation("ProfileToGroup", fields: [group_name], references: [name])
//     group_name  String?
// }

// model Group {
//     id          Int      @id @default(autoincrement())
//     name        String   @unique
//     href        String?

//     user        User     @relation("ProfileToGroup")
//     users       User[]
// }